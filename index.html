<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Campaign Map</title>
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Mobile Header -->
    <div id="mobile-header">
        <button id="menu-toggle" class="menu-btn">
            <i class="fas fa-bars"></i>
        </button>
        <h1><i class="fas fa-vote-yea"></i> Campaign Map</h1>
        <div class="header-stats-mobile">
            <span id="total-booths-mobile">0</span>
            <span id="total-voters-mobile">0</span>
        </div>
    </div>

    <!-- Sliding Menu Panel -->
    <div id="menu-panel" class="menu-panel">
        <div class="menu-header">
            <h2><i class="fas fa-filter"></i> Filters & Stats</h2>
            <button id="menu-close" class="close-btn">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <div class="menu-content">
            <!-- Quick Stats -->
            <div class="menu-section">
                <h3><i class="fas fa-chart-bar"></i> Overview</h3>
                <div class="quick-stats">
                    <div class="stat-item">
                        <i class="fas fa-map-marker-alt"></i>
                        <div>
                            <span class="stat-num" id="total-booths">0</span>
                            <span class="stat-lbl">Booths</span>
                        </div>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-users"></i>
                        <div>
                            <span class="stat-num" id="total-voters">0</span>
                            <span class="stat-lbl">Voters</span>
                        </div>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-fire"></i>
                        <div>
                            <span class="stat-num" id="critical-count">0</span>
                            <span class="stat-lbl">Critical</span>
                        </div>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-chart-line"></i>
                        <div>
                            <span class="stat-num" id="campaign-progress">0%</span>
                            <span class="stat-lbl">Progress</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="menu-section">
                <h3><i class="fas fa-bolt"></i> Quick Actions</h3>
                <div class="action-grid">
                    <button class="action-btn priority" onclick="showHighPriorityBooths()">
                        <i class="fas fa-exclamation-triangle"></i>
                        <span>Priority Booths</span>
                    </button>
                    <button class="action-btn unvisited" onclick="showUnvisitedBooths()">
                        <i class="fas fa-map-marked-alt"></i>
                        <span>Unvisited</span>
                    </button>
                    <button class="action-btn top-voters" onclick="showTopVoterBooths()">
                        <i class="fas fa-sort-amount-down"></i>
                        <span>Top Voters</span>
                    </button>
                    <button class="action-btn export" onclick="exportCampaignData()">
                        <i class="fas fa-file-export"></i>
                        <span>Export Data</span>
                    </button>
                </div>
            </div>

            <!-- Party Filter -->
            <div class="menu-section">
                <h3><i class="fas fa-flag"></i> Party</h3>
                <div class="filter-buttons">
                    <button class="filter-btn active" data-party="all" onclick="filterByParty('all')">
                        All Parties
                    </button>
                    <button class="filter-btn surya" data-party="Surya" onclick="filterByParty('Surya')">
                        <i class="fas fa-sun"></i> Surya
                    </button>
                    <button class="filter-btn congress" data-party="Congress" onclick="filterByParty('Congress')">
                        <i class="fas fa-hand-peace"></i> Congress
                    </button>
                    <button class="filter-btn rsp" data-party="RSP" onclick="filterByParty('RSP')">
                        <i class="fas fa-flag"></i> RSP
                    </button>
                </div>
            </div>

            <!-- Visit Count Filter -->
            <div class="menu-section">
                <h3><i class="fas fa-eye"></i> Visit Status</h3>
                <div class="filter-buttons">
                    <button class="filter-btn active" data-visits="all" onclick="filterByVisits('all')">
                        All Visits
                    </button>
                    <button class="filter-btn urgent" data-visits="0" onclick="filterByVisits(0)">
                        <i class="fas fa-exclamation"></i> Not Visited
                    </button>
                    <button class="filter-btn" data-visits="1-2" onclick="filterByVisits('1-2')">
                        1-2 Visits
                    </button>
                    <button class="filter-btn" data-visits="3+" onclick="filterByVisits('3+')">
                        3+ Visits
                    </button>
                </div>
            </div>

            <!-- Priority Filter -->
            <div class="menu-section">
                <h3><i class="fas fa-star"></i> Priority Level</h3>
                <div class="filter-buttons">
                    <button class="filter-btn active" data-priority="all" onclick="filterByPriority('all')">
                        All Priorities
                    </button>
                    <button class="filter-btn urgent" data-priority="critical" onclick="filterByPriority('critical')">
                        <i class="fas fa-fire"></i> Critical
                    </button>
                    <button class="filter-btn" data-priority="high" onclick="filterByPriority('high')">
                        High
                    </button>
                    <button class="filter-btn" data-priority="medium" onclick="filterByPriority('medium')">
                        Medium
                    </button>
                </div>
            </div>

            <!-- Municipality Filter -->
            <div class="menu-section">
                <h3><i class="fas fa-map"></i> Municipality</h3>
                <div class="filter-buttons municipality">
                    <button class="filter-btn active" data-mun="all" onclick="filterByMunicipality('all')">
                        <span class="color-dot rainbow"></span>
                        All Municipalities
                    </button>
                    <button class="filter-btn" data-mun="Arjunchaupari" onclick="filterByMunicipality('Arjunchaupari')">
                        <span class="color-dot" style="background-color:#FF6B6B;"></span>
                        Arjunchaupari
                    </button>
                    <button class="filter-btn" data-mun="Aandhikhola" onclick="filterByMunicipality('Aandhikhola')">
                        <span class="color-dot" style="background-color:#4ECDC4;"></span>
                        Aandhikhola
                    </button>
                    <button class="filter-btn" data-mun="Putalibazar" onclick="filterByMunicipality('Putalibazar')">
                        <span class="color-dot" style="background-color:#45B7D1;"></span>
                        Putalibazar
                    </button>
                    <button class="filter-btn" data-mun="Waling" onclick="filterByMunicipality('Waling')">
                        <span class="color-dot" style="background-color:#F7B731;"></span>
                        Waling
                    </button>
                    <button class="filter-btn" data-mun="Phedikhola" onclick="filterByMunicipality('Phedikhola')">
                        <span class="color-dot" style="background-color:#A55EEA;"></span>
                        Phedikhola
                    </button>
                    <button class="filter-btn" data-mun="Bhirkot" onclick="filterByMunicipality('Bhirkot')">
                        <span class="color-dot" style="background-color:#26DE81;"></span>
                        Bhirkot
                    </button>
                    <button class="filter-btn" data-mun="Biruwa" onclick="filterByMunicipality('Biruwa')">
                        <span class="color-dot" style="background-color:#FD79A8;"></span>
                        Biruwa
                    </button>
                    <button class="filter-btn" data-mun="Harinas" onclick="filterByMunicipality('Harinas')">
                        <span class="color-dot" style="background-color:#FC5C65;"></span>
                        Harinas
                    </button>
                </div>
            </div>

            <!-- Party Progress -->
            <div class="menu-section">
                <h3><i class="fas fa-tasks"></i> Party Dominance</h3>
                <div class="progress-bars">
                    <div class="progress-item">
                        <span class="progress-label">Surya</span>
                        <div class="progress-bar">
                            <div class="progress-fill surya" style="width: 0%">0%</div>
                        </div>
                    </div>
                    <div class="progress-item">
                        <span class="progress-label">Congress</span>
                        <div class="progress-bar">
                            <div class="progress-fill congress" style="width: 0%">0%</div>
                        </div>
                    </div>
                    <div class="progress-item">
                        <span class="progress-label">RSP</span>
                        <div class="progress-bar">
                            <div class="progress-fill rsp" style="width: 0%">0%</div>
                        </div>
                    </div>
                    <div class="progress-item">
                        <span class="progress-label">Coverage</span>
                        <div class="progress-bar">
                            <div class="progress-fill coverage" style="width: 0%">0%</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Reset Button -->
            <div class="menu-section">
                <button class="reset-btn" onclick="resetFilters()">
                    <i class="fas fa-redo"></i> Reset All Filters
                </button>
            </div>
        </div>
    </div>

    <!-- Overlay when menu is open -->
    <div id="menu-overlay" class="menu-overlay"></div>

    <!-- Map Container -->
    <div id="map"></div>

    <!-- Compact Legend -->
    <div class="map-legend">
        <button class="legend-toggle">
            <i class="fas fa-palette"></i>
        </button>
        <div class="legend-content">
            <div class="legend-row">
                <strong>Size:</strong>
                <div class="legend-items">
                    <span class="legend-dot small"></span> Not Visited
                    <span class="legend-dot medium"></span> 1-2
                    <span class="legend-dot large"></span> 3+
                </div>
            </div>
        </div>
    </div>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="app.js"></script>
</body>
</html>
